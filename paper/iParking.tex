%  LaTeX support: latex@mdpi.com
%  In case you need support, please attach all files that are necessary for compiling as well as the log file, and specify the details of your LaTeX setup (which operating system and LaTeX version / tools you are using).

% You need to save the "mdpi.cls" and "mdpi.bst" files into the same folder as this template file.

%=================================================================
\documentclass[journal,article,submit,moreauthors,pdftex,10pt,a4paper]{mdpi}
%
%--------------------
% Class Options:
%--------------------
% journal
%----------
% Choose between the following MDPI journals:
% actuators, admsci, aerospace, agriculture, agronomy, algorithms, animals, antibiotics, antibodies, antioxidants, applsci, arts, atmosphere, atoms, axioms, batteries, bdcc, behavsci, beverages, bioengineering, biology, biomedicines, biomimetics, biomolecules, biosensors, brainsci, buildings, carbon, cancers, catalysts, cells, challenges, chemengineering, chemosensors, children, chromatography, climate, coatings, computation, computers, condensedmatter, cosmetics, cryptography, crystals, data, dentistry, designs, diagnostics, diseases, diversity, econometrics, economies, education, electronics, energies, entropy, environments, epigenomes, fermentation, fibers, fishes, fluids, foods, forests, futureinternet, galaxies, games, gastrointestdisord, gels, genealogy, genes, geosciences, geriatrics, healthcare, horticulturae, humanities, hydrology, informatics, information, infrastructures, inorganics, insects, instruments, ijerph, ijfs, ijms, ijgi, ijtpp, inventions, jcdd, jcm, jdb, jfb, jfmk, jimaging, jof, jintelligence, jlpea, jmse, jpm, jrfm, jsan, land, languages, laws, life, literature, logistics, lubricants, machines, magnetochemistry, marinedrugs, materials, mathematics, mca, mti, medsci, medicines, membranes, metabolites, metals, microarrays, micromachines, microorganisms, minerals, molbank, molecules, mps, nanomaterials, ncrna, neonatalscreening, nutrients, ohbm, particles, pathogens, pharmaceuticals, pharmaceutics, pharmacy, philosophies, photonics, plants, polymers, processes, proteomes, publications, recycling, religions, remotesensing, resources, risks, robotics, safety, scipharm, sensors, separations, sexes, sinusitis, socsci, societies, soils, sports, standards, sustainability, symmetry, systems, technologies, toxics, toxins, tropicalmed, universe, urbansci, vaccines, vetsci, viruses, vision, water
%---------
% article
%---------
% The default type of manuscript is article, but can be replaced by:
% addendum, article, book, bookreview, briefreport, casereport, changes, comment, commentary, communication, conceptpaper, correction, conferenceproceedings, conferencereport, expressionofconcern, meetingreport, creative, datadescriptor, discussion, editorial, essay, erratum, hypothesis, interestingimage, letter, newbookreceived, opinion, obituary, projectreport, reply, retraction, review, perspective, preprints, shortnote, supfile, technicalnote, viewpoint
% supfile = supplementary materials
%----------
% submit
%----------
% The class option "submit" will be changed to "accept" by the Editorial Office when the paper is accepted. This will only make changes to the frontpage (e.g. the logo of the journal will get visible), the headings, and the copyright information. Also, line numbering will be removed. Journal info and pagination for accepted papers will also be assigned by the Editorial Office.
%------------------
% moreauthors
%------------------
% If there is only one author the class option oneauthor should be used. Otherwise use the class option moreauthors.
%---------
% pdftex
%---------
% The option pdftex is for use with pdfLaTeX. If eps figure are used, remove the option pdftex and use LaTeX and dvi2pdf.

%=================================================================
\firstpage{1}
\makeatletter
\setcounter{page}{\@firstpage}
\makeatother
\articlenumber{x}
\doinum{10.3390/------}
\pubvolume{xx}
\pubyear{2016}
\copyrightyear{2016}
\externaleditor{Academic Editor: name}
\history{Received: date; Accepted: date; Published: date}

%------------------------------------------------------------------
% The following line should be uncommented if the LaTeX file is uploaded to arXiv.org
%\pdfoutput=1

%=================================================================
% Add packages and commands here. The following packages are loaded in our class file: fontenc, calc, indentfirst, fancyhdr, graphicx, lastpage, ifthen, lineno, float, amsmath, setspace, enumitem, mathpazo, booktabs, titlesec, etoolbox, amsthm, hyphenat, natbib, hyperref, footmisc, geometry, caption, url, mdframed
\usepackage{subfigure}

% tikz package
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, arrows}

%enable \cref{...} and \Cref{...} instead of \ref: Type of reference included in the link
\usepackage[capitalise,nameinlink]{cleveref}
%Nice formats for \cref
\crefname{section}{Sect.}{Sect.}
\Crefname{section}{Section}{Sections}
%=================================================================
%% Please use the following mathematics environments: Theorem, Lemma, Corollary, Proposition, Characterization, Property, Problem, Example, ExamplesandDefinitions, Hypothesis, Remark, Definition
%% For proofs, please use the proof environment (the amsthm package is loaded by the MDPI class).

%=================================================================
% Full title of the paper (Capitalized)
\Title{iParking -- Real-Time Parking Space Monitor and Guiding System with Cloud Service}

% If this is an expanded version of a conference paper, please cite it here: enter the full citation of your conference paper, and add $^\dagger$ in the end of the title of this article.
%\conference{Title}

% Authors, for the paper (add full first names)
\Author{Ching-Fei Yang, You-Huei Ju, Chung-Ying Hsieh,
Chia-Ying Lin, Meng-Hsun Tsai, Hui-Ling Chang}
% Authors, for metadata in PDF
%\AuthorNames{Firstname Lastname, Firstname Lastname and Firstname Lastname}

% Affiliations / Addresses (Add [1] after \address if there is only one affiliation.)
\address{jingfei@imslab.org}

% Contact information of the corresponding author
%\corres{Correspondence: e-mail@e-mail.com; Tel.: +x-xxx-xxx-xxxx}

% Current address and/or shared authorship
\firstnote{Department of Computer Science and Information Engineering,
National Cheng Kung University, Tainan, Taiwan}
%\secondnote{These authors contributed equally to this work.}
% The commands \thirdnote{} till \eighthnote{} are available for further notes

% Simple summary
%\simplesumm{}

% Abstract (Do not use inserted blank lines, i.e. \\)
\abstract{By the popularization of cars, average number of vehicles owned by one person
grows with passing days. However, the number of parking areas is out of
proportion. In order to satisfy the requirements of parking space and
reduce illegal parking, we propose iParking, a real-time parking space
monitoring and guiding system, in this paper.
We lay emphasis on roadside parking. The system determines and records
empty parking spaces through cloud computing, wireless technology
between vehicles, and image analysis. It tells you the nearest location
of empty parking space while drivers have requests. We expect the system
to cause attention to more people and government while it solves relative
problems about parking space.}
% Keywords
\keyword{cloud computing; image recognition; parking space management; wireless technology}

% The fields PACS, MSC, and JEL may be left empty or commented out if not applicable
%\PACS{J0101}
%\MSC{}
%\JEL{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Only for the journal Data:

%\dataset{DOI number or link to the deposited data set in cases where the data set is published or set to be published separately. If the data set is submitted and will be published as a supplement to this paper in the journal Data, this field will be filled by the editors of the journal. In this case, please make sure to submit the data set as a supplement when entering your manuscript into our manuscript editorial system.}

%\datasetlicense{license under which the data set is made available (CC0, CC-BY, CC-BY-SA, CC-BY-NC, etc.)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% For Conference Proceedings Papers: add the conference title here
%\conferencetitle{}

%\setcounter{secnumdepth}{4}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Only for the journal Gels: Please place the Experimental Section after the Conclusions

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}\label{sec:intro}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Recently, parking problem has become people's harassment.
It is shown from statistical data in Ministry of
Transportation, Taiwan that the number of registered vehicles is
7,554,319 until December 2014 \cite{motc}; However, it is also mentioned that
the number of legal parking space is about four million in total.
Furthermore, it will cause several problems such as the extremely slow
speed while finding parking space, scrambling for roads with scooters,
parking temporarily in dangerous part, or driving U-turn illegally. The
behavior will not only break the safety and regular of transportation
but also make noise and consume resource.
It is easy to observe that some vehicles need to find parking space by
themselves while roadside parking spaces are not enough. The situation
will bring out arbitrary parking, and it is also the main reason of
illegal parking.

Over the last few years, LBS (Location-Based Service) \cite{LBS} is getting noticed along with
the appearance of smartphones. LBS can apply broadly to different area
like health, job, daily life, and etc. Thus, how to use LBS to help
different users find the appropriate parking space is vital. The usage
of monitoring parking space now is to provide roadside parking space's
locations at best, but it will not tell drivers where the vacant space
is. Thus, we would like to develop a monitor and guiding system focus on
roadside parking to provide the information of nearby parking space and
help drivers park with the fastest way.

We will introduce the system in four parts. First of all, know what is
the demand of our work and compare with other techniques. Next, show the
details, especially features and structure of our service. In addition,
demonstrate how we implement and design the system. Finally, make a
conclusion, discuss more about future work.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Related Work}\label{sec:relatedWork}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
\subsection{Demand of parking space}
%

In the statistical table of important indicators from Ministry of
Transportation, Taiwan \cite{motc}, it is pointed out that parking space is one
of the important indicators in addition to the number of vehicles.
\Cref{fig:StatisticalTable} is the comparison chart between the number of vehicles and
parking spaces from 2006 to 2014 in Taiwan.

\begin{figure}[tbp]
\begin{center}
\includegraphics[width=0.8\textwidth]{Figures/Statistical_Table.png}
\end{center}
\caption{Statistical table of vehicles and parking spaces' number from
2006 to 2014}
\label{fig:StatisticalTable}
\end{figure}

It is shown from \Cref{fig:StatisticalTable} that the difference between supply and demand
of parking space is about two million. In addition, it is pointed out
from trend of line that the growth rate of vehicles and parking spaces
is closed. However, it is not simple to add parking spaces because it
involves road network planning. In this knotty situation, it becomes
vital and urgent to solve the management of parking space in order to
make good use of limited resource.

Furthermore, some recent researches verify that people would rather
spend more time finding roadside parking space than off-street parking
even if there are vacant spaces in the off-street parking lot \cite{OnStreetParking}. Take
Tainan City for example, service in parking lot does not meet drivers'
expect, such as high parking fee, mess surroundings, or etc. Hence, the
situation results in low usage rate of parking lot and shortage of
roadside parking space. Thus, to solve the problem of roadside parking
is necessary.

%
\subsection{Existing parking space monitored technique}
%

All of existing parking space monitored techniques are limited to
parking lot and only supported by sensors. For instance, intelligent
parking lot uses wireless sensor network, ZIBEE, pressure sensors
\cite{PaymentSystem, IOV2015}.
They update database by sensors to know if it is empty. The another
instance is Eco-Community plan developed by several schools
\cite{EcoCommunity}. Its
main method is using the sensitivity of the sensor, Octopus II,
updating changes to database. Therefore, the changes will tell users
information about parking spaces. However, the two techniques have a big
constraint when it comes to downtown area. It is a huge challenge to set
up sensors for all parking spaces in downtown due to the fee of building
and maintenance. That is to say, both of them are not suitable to
roadside parking in comparison with our system.

As regards other apps in the market, they are connected to nearby
parking lot, offering real-time information. However, only few of
them mention payment information about roadside parking. In conclusion,
none of the apps in the market provide function to find roadside parking
spaces until now.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Service and System Structure}\label{sec:service}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
\subsection{Software platform}
%

We choose smartphone and related device to complete mobility, driving
recorder, and Network communication by reason of the target users,
people with mobile vehicle. We build the application base on Android,
using Java to implement code structure and GUI design.

%
\subsection{Features}
%

%
\subsubsection{Cloud storage and computing}
%

Cloud Storage is an online service which can save data on virtual server
through Internet. The service become more and more popular due to the
popularity of Internet and the increasing demand of data storage. That
is to say, simply save data in actual hard dick is getting insufficient.
Therefore, limited storage devices will bring more benefit by Internet
and storage virtualization technique.

In order to improve the efficiency of driving records, and reduce the
capacity of mobile device. We will refer to existing cloud storage
service, analyzing data through servers in cloud, and send the parking
information to users who have request.

%
\subsubsection{Static image streaming}
%

Streaming media is a process to compress a series of media data, send
through network section, and offer real-time media service on the
Internet \cite{IOV2014}. By the technique, media data are able to watch without
downloading whole media. Therefore, it is called ``streaming'' because
data in the process behaves like running water.

We can say that static image streaming is to connect images,
record the event over the next period of time. Under the premise that
analyzing driving records accurately, we will use static image streaming
to lessen the burden instead of sending whole driving record.

%
\subsubsection{Analyzing vacant parking space}
%

In the reference \cite{ParkingSpot}, the author has proposed solutions to detect if
parking spaces are vacant. Its technique includes Hough line detection
and Canny edge detection, implementing by OpenCV library. The
original method has two limitations. The first one is that it can only
identify one photo at a time while the another is that only the parking
space at bottom right corner can be identified. We breakthrough them by
using static image streaming.


%
\subsection{Efficacy}
%

%
\subsubsection{Monitoring parking space}
%

The situation of parking space is different from area, timing, and
location. Therefore, the key point is how to monitor the specific
parking space immediately. Besides, if there are many people use this
service at the same time, it will be fairly accurate with steadily
update.

%
\subsubsection{Saving and analyzing driving recorder}
%

In the process of detecting vacant parking space's condition, it is
necessary to analyze big data and use large storage. Hence, we use cloud
service and client-server model to handle and send all the requests in
order to reduce the usage of memory, storage, and workload.

%
\subsubsection{Data transmission}
%

If the goal is to keep high accuracy and immediacy, the system will
bring out high Internet usage because it continuing transfers driving
recorder. Therefore, we will capture driving image with a fixed distance
according to speed of the vehicle. Coordinating with GPS position, it
will become image streaming instead of video. That is to say, capacity
and the time of data transmission can be saved.

%
\subsection{Structure}
%

We mainly focus on car owners. Besides, we will use our own approach to
detect driving record automatically and communicate between vehicles.
The application is built on Android, expected to run the program on
driving recorders. We will limit to a specific road section while
testing and developing the system.

Four steps are supposed to proceed. First, determine the specific road
section, and collect data; Next, sort out the collected data. Start
to plan the structure of program; Then, begin to develop the program,
add GUI, do simulation, and test system. Finally, analyze and present
whole the research. \Cref{fig:flowDiagram} is the flow diagram of these steps.

\begin{figure}[tbp]
\begin{center}
	% Define block styles
	\tikzstyle{startstop} = [rectangle, rounded corners, minimum
width=3cm, minimum height=1cm,text centered, text width=3cm, draw=black, fill=red!30]
	\tikzstyle{process} = [rectangle, minimum width=3cm, minimum
height=1cm, text centered, text width=3cm, draw=black, fill=orange!30]
	\tikzstyle{decision} = [diamond, minimum width=3cm, minimum height=1cm,
text centered, text width=3cm, draw=black, fill=green!30]
	\tikzstyle{arrow} = [thick,->,>=stealth]
	\tikzstyle{io} = [trapezium, trapezium left angle=70, trapezium
right angle=110, minimum width=2cm, minimum height=1cm, text centered,
text width=3cm,  draw=black, fill=blue!30]

	\begin{tikzpicture}[node distance=2cm]
	    % Place nodes
	    \node [startstop] (init) {initialize model};
	    \node [process, below of=init] (function) {plan for each function};
	    \node [process, below of=function] (space) {provide space to store driving record};
	    \node [io, below of=space] (receive) {receive users' requests};
	    \node [process, right of=receive, xshift=2cm] (design) {design UI interface};
	    \node [process, above of=design] (system) {implement the whole system};
	    \node [decision, above of=system, yshift=1.5cm] (testing) {test client and server side separately};
	    \node [decision, right of=testing, xshift=3cm] (integrate) {integrate all structures};
		\node [startstop, below of=integrate, yshift=-1.5cm] (end) {stop};
	    % Draw edges
	    \draw [arrow] (init) -- (function);
	    \draw [arrow] (function) -- (space);
	    \draw [arrow] (space) -- (receive);
		\draw [arrow] (receive) -- (design);
		\draw [arrow] (design) -- (system);
		\draw [arrow] (system.110) -- (testing.-96);
	    \draw [arrow] (testing) -- node [anchor=north] {yes} (integrate);
	    \draw [arrow] (testing.-85) -- node [anchor=west] {no}(system.70);
	    \draw [arrow] (integrate) -- node [anchor=west] {yes} (end);
	    \draw [arrow] (integrate) -- node [anchor=north] {no}(system);
	\end{tikzpicture}
\end{center}
\caption{Research flow diagram}
\label{fig:flowDiagram}
\end{figure}

%
\subsubsection{Building cloud service and algorithm design}
%

The main usage of cloud service is to implement each operated function,
handle users' request, and provide storage to save driving records. The
operated function includes receiving image data from users, analyzing
images, building database, searching database, and etc. Hold time is the
first concern because of massive calculation. The other factor is the
availability of data, for example, we will not use old data and data
which has been analyzed in the same location. This algorithm will help
reduce repeated operations, furthermore, it helps us make sure that we
are analyzing real-time image in every data.

%
\subsubsection{Program structure in device and UI design}
%

We will plan our service with relation to different characters. For
example, it is necessary for users to search nearby parking space, it is
required for devices to send image information to servers in cloud, and it
is important for servers to analyze and collect data. As for UI design
in app, in order to realize convenient searching function and interface,
it need to be designed from the view of users.

In \Cref{fig:system}, we divide the system into three parts, User A, User B, and Cloud server.
User A sends images and GPS information through WiFi / 3G / 4G technique;
User B sends request for parking, and get the parking space information
immediately; And cloud server uses algorithm to know if there are any
spaces and tell users the result if they have requests.

\begin{figure}[tbp]
	\centering
		\includegraphics[width=0.8\textwidth,natwidth=1053,natheight=482]{Figures/flowChart.png}
		\caption{System flow chart}
		\label{fig:system}
\end{figure}

The error of GPS measurement is about 5 to 10 meters. We can say
that it is about 1 or 2 roadside parking spaces. In order to enhance the
accuracy, we will combine Google Maps API, take the advantage of its
navigation and distance matrix service. Besides accessing the speed and
distance of vehicles, the API can also help send GPS location to keep
loading and operating fast in the device.

When it comes to clients, we will check whether there is anyone else
sending the same information of specific location at the same time or
not. It will not send information if anyone else is sending the data.
However, if there is not anyone else sending the data, we plan to
capture image immediately after moving a small and appropriate distance
before sending to servers in cloud.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Implementation}\label{sec:implementation}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

The system is divided into three parts - image recongization, cloud
server, and client's application. At first, the three parts will be implemented
separately. They will be combined and operate after they all make a certain proportain.

\subsection{Image recognition of roadside parking space}

Image recognition and analysis of roadside parking space is implemented by C++ with
OpenCV library. The program will return if the image of parking space is
vacant after received an image.

\subsubsection{Setting ROI (Region of Interest)}

First, as \Cref{fig:ROI}, the program will convert the image into gray scale. The reason is
that the perspective of image will affect the degree of image
recognition. Moreover, in order to eliminate the noise and white area such
as sky and clouds, the image will be divided into four equal parts.
Only the right-bottom part will be reserved because the spaces are
usually located in the right hand side (in right-hand-traffic countries).

\begin{figure}[tbp]
	\subfigure[Gray scale image] {
		\includegraphics[scale=0.8,natwidth=401,natheight=214]{Figures/grayScaleImage.png}
	}
	\hspace{0.2in}
	\subfigure[ROI image] {
		\includegraphics[scale=0.8,natwidth=405,natheight=216]{Figures/ROIImage.png}
	}
	\caption{Setting ROI}
	\label{fig:ROI}
\end{figure}

\subsubsection{Sides detection and Noise reduction of Image}

The program uses Canny edge detection in OpenCV to find each side of
parking space. Afterward it reduces noise by the way, Median Blur.
(\Cref{sideDetecting})

\begin{figure}[tbp]
	\begin{minipage}{.4\textwidth}
		\centering
		\includegraphics[scale=0.7,natwidth=444,natheight=236]{Figures/sideDetecting.png}
		\caption{Detect each side}
		\label{sideDetecting}
	\end{minipage}
	\hspace{0.5in}
	\begin{minipage}{.4\textwidth}
		\centering
		\includegraphics[scale=0.7,natwidth=444,natheight=237]{Figures/drawParkingSpace.png}
		\caption{Draw parking space}
		\label{drawParkingSpace}
	\end{minipage}
\end{figure}

\subsubsection{Find out Lines in the Image}

First, we use Hough line detection to detect straight lines
by angle and intersection of lines.
With standard Hough transform function, a single-channel, grayscale image is sent.
Next, the function will return a two-element vector lines $(\rho, \theta)$ while $\rho$ is the distance
from the coordinate origin $(0, 0)$ and $\theta$ is the line rotation angle in radians.
After getting lines, we divide lines into three parts, vertical lines ($tan\theta = 0$),
horizontal lines ($tan\theta < -5$ or $tan\theta > 5$) and parking lines
(neither vertical lines nor horizontal lines). It is also our approach to
distinguish parking spots from roads.

\subsubsection{Choose the Correct Lines}

The next step is to choose the correct lines in pool composed of
several lines with have same direction. Because the particular spot
may not look same by different distance, angel, or camera.
The program will find the longest length of parking space, which is
also the line closed toand parallel to the road.

From the result of Hough transform function, we get vector $(\rho, \theta)$.
That is to say, we can get start and end points of each line in the same direction.
Therefore, we get the parking line that is constructed by the
average of all starting points and all end points.
Finally, the longest line of parking space is reduced to a specific one.

\subsubsection{Get the Appropriate Line Segment}

Within the longest line we get from last step, it will have $n$ points of
intersection if there are $n$ horizontal lines. Next, the points are
sorted from small to large by their y value. And the program subtracts
the second y value from the first one between each sorted point. If the
result is more than 10, we suppose that the two pionts is not close.
Therefore, we store the second point because they are not on the same line.
After the process, the program gets several points which are on
different horizontal lines. The last but not the least, we find the longest
distance between the points. It is also the correct parking space's line
segment that is closed to and parallel to the road such as \Cref{fig:lineSegment}.


\begin{figure}[tbp]
	\begin{minipage}{.4\textwidth}
		\centering
		\includegraphics[scale=0.5,natwidth=311,natheight=258]{Figures/lineSegment.png}
		\caption{Blue line is the line segment}
		\label{fig:lineSegment}
	\end{minipage}
	\hspace{0.5in}
	\begin{minipage}{.4\textwidth}
		\centering
		\includegraphics[scale=0.5,natwidth=311,natheight=258]{Figures/fourLines.png}
		\caption{Find out all lines}
		\label{fig:fourLines}
	\end{minipage}
\end{figure}

\subsubsection{Determine each Line of Parking Space}

By angle of view (AOV)\cite{AOV}, if we supposed that the length of
straight line we get from last step is $m$, the length of top horizontal
line is $m \times 0.9$, and the length of bottom horizontal line is $m \times 1.1$.
Thus, as shown in \Cref{fig:fourLines}, the program will get the parking
space by points, length and width.

\subsubsection{Detect if the parking space is able to use}

If the appropriate space is not found, the program will return the
result of no vacant space (equals to occupied by vehicle). However, if
the space is found, it will continue to detect if the space is
able to use.

If the ratio between the side of parking space and its shelter is more
than a certain number, it means that the space has been occupied.
Therefore, the program will return no vacant spaces. On the contrary,
it will return there is a vacant parking space.

\subsection{Cloud analyzing server}

After passing image recognition of roadside parking space testing, the
program mentioned above will be moved to cloud service. Moreover, it will
coordinate with the open data offered by government. The data will
provide the information about roadside parking space. Therefore, we are
able to know which road sections do not have spaces, prevent analyze the
images from those sections. We implement the server by nodejs action
hero framework; In addition to offering API with http, we will provide
interface for webpages in order to let users find parking spaces
directly. Non-relational database, Mongo, is also used to accelerate
access and operated speed.

Servers in cloud will translate longitude and latitude into address
information while receiving GPS information and images by users. Next,
it will compare the road section with open data to confirm if the
section provides parking spaces. After successful analysis, the result
with address will update to database for other users.

\subsection{Mobile APP (client side)}

It is divided into several steps to implement, mainly separated into
user (device) and server side. First, we use Android platform with
Android Studio and Android SDK, which are based on JAVA, to develop
client's application.


\begin{figure}[tbp]
	\subfigure[Home] {
		\includegraphics[scale=0.3,natwidth=165,natheight=315]{Figures/userHome.png}
		\label{fig:userHome}
	}
	\hspace{0.1in}
	\subfigure[Record] {
		\includegraphics[scale=0.3,natwidth=165,natheight=315]{Figures/userRecord.png}
		\label{fig:userRecord}
	}
	\hspace{0.1in}
	\subfigure[Setting] {
		\includegraphics[scale=0.3,natwidth=165,natheight=315]{Figures/userSetting.png}
		\label{fig:userSetting}
	}
	\hspace{0.1in}
	\subfigure[Result] {
		\includegraphics[scale=0.3,natwidth=165,natheight=315]{Figures/userResult.png}
		\label{fig:userResult}
	}
	\hspace{0.1in}
	\subfigure[Map] {
		\includegraphics[scale=0.3,natwidth=165,natheight=315]{Figures/userMap.png}
		\label{fig:userMap}
	}
	\caption{User interface}
	\label{fig:userInterface}
\end{figure}

\Cref{fig:userInterface} is our main interface and function.
\Cref{fig:userHome} is the first screen of the system. You
can choose the function of both recording and searching.
\Cref{fig:userRecord} is recording screen. It will use device's
camera automatically, temporarily save the records in iParking
folder. The purpose is to let users check the
record, choose if they want to provide it to other users or delete it. After
uploading the record, it will be deleted. \Cref{fig:userSetting}
is the setting page. Users can change their sending rate (network flow)
and searching range while finding parking space.
\Cref{fig:userResult} is the result of searching. Users will know
how many parking spaces nearby. After choosing the one user prefers,
the location will be shown on the map like \Cref{fig:userMap}.
Therefore, user can be navigated to the space combined with Google API.

\subsection{Testing}

In the part of testing, we will initially test client and server side
separately, merge them with UI design. Finally, we will test
the integrated system by the following steps. First, a single vehicle.
That is to test with different speed, make sure that static image
streaming is worked with cloud service. Next, test the efficiency of
multiple vehicles. Verify that no images will be in the same
location at the same time. The last step is to confirm that client side
can get the correct information immediately.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Conclusion}\label{sec:conclusion}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

The goal of this system is to offer users a practical and useful
application. Users are able to find parking spaces while having
requests. In addition, traffic problem, air pollution problem, and the
behavior of illegal parking will decrease.

We have a simple but completed system until now. The system includes
cloud service, the technique to analyze images, and an application for
Android. We expect to develop more applications on iPhone and Windows
Phone. Besides, we look forward to doing more research on accuracy of
image recognition, server load balance, and Vehicular ad hoc network.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\vspace{6pt}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% optional
%\supplementary{The following are available online at www.mdpi.com/link, Figure S1: title, Table S1: title, Video S1: title.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\acknowledgments{his work was sponsored in part by Ministry of Science and Technology
(MOST), Taiwan, under the contract number MOST 105-2221-E-006-186- and
MOST 104-2815-C-006-029-E.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\authorcontributions{For research articles with several authors, a short paragraph specifying their individual contributions must be provided. The following statements should be used ``X.X. and Y.Y. conceived and designed the experiments; X.X. performed the experiments; X.X. and Y.Y. analyzed the data; W.W. contributed reagents/materials/analysis tools; Y.Y. wrote the paper.'' Authorship must be limited to those who have contributed substantially to the work reported.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\conflictofinterest{Declare conflicts of interest or state ``The authors declare no conflict of interest.'' Authors must identify and declare any personal circumstances or interest that may be perceived as inappropriately influencing the representation or interpretation of reported research results. Any role of the funding sponsors in the design of the study; in the collection, analyses or interpretation of data; in the writing of the manuscript, or in the decision to publish the results must be declared in this section. If there is no role, please state ``The founding sponsors had no role in the design of the study; in the collection, analyses, or interpretation of data; in the writing of the manuscript, and in the decision to publish the results''.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% optional
%\abbreviations{The following abbreviations are used in this manuscript:\\
%
%\noindent
%\begin{tabular}{@{}ll}
%MDPI & Multidisciplinary Digital Publishing Institute\\
%DOAJ & Directory of open access journals\\
%TLA & Three letter acronym\\
%LD & linear dichroism
%\end{tabular}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% optional
%\appendixtitles{no} %Leave argument "no" if all appendix headings stay EMPTY (then no dot is printed after "Appendix A"). If the appendix sections contain a heading then change the argument to "yes".
%\appendixsections{multiple} %Leave argument "multiple" if there are multiple sections. Then a counter is printed ("Appendix A"). If there is only one appendix section then change the argument to "one" and no counter is printed ("Appendix").
%\appendix
%\section{}
%\subsection{}
%The appendix is an optional section that can contain details and data supplemental to the main text. For example, explanations of experimental details that would disrupt the flow of the main text, but nonetheless remain crucial to understanding and reproducing the research shown; figures of replicates for experiments of which representative data is shown in the main text can be added here if brief, or as Supplementary data. Mathemtaical proofs of results not central to the paper can be added as an appendix.

%\section{}
%All appendix sections must be cited in the main text. In the appendixes, Figures, Tables, etc. should be labeled starting with `A', e.g., Figure A1, Figure A2, etc.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Citations and References in Supplementary files are permitted provided that they also appear in the reference list here.
\bibliographystyle{mdpi}

%=====================================
% References, variant B: external bibliography
%=====================================
\bibliography{iParking}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% optional
%\sampleavailability{Samples of the compounds ...... are available from the authors.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}
